## 1. HTTP의 특징
HTTP에는 connectionless와 stateless라는 특징이 있다.
### 1.1 connectionless   
클라이언트가 요청을 보내면 서버는 요청에 맞는 응답을 보내면 맺었던 연결을 끊어 버리는 성질   
* http가 connectionless 한 이유 : 서버에서 다수의 클라이언트와의 연결이 계속 유지된다면 비용이 많이 들게 되기 때문이다.
* connectionless의 단점 : 모든 요청에 대해 매번 연결/해제를 반복하므로 연결/해제에 대한 오버헤드가 발생한다.   
  * 오버헤드 : 어떤 처리를 하기 위해 들어가는 간접적인(필수적인 것은 아니지만 기능을 부가하기 위해 추가되는) 처리 시간/메모리 등을 말한다.   
* 위의 단점을 해결하기 위해 HTTP 1.1부터 Keep Alive를 지원한다.   
* Keep Alive란 연결된 Socket에서 access가 마지막으로 종료된 시점에서 특정 시간 동안 acceess가 없어도 소켓의 연결(세션)을 유지하는 것을 말한다.   
### 1.2 stateless   
connectionless로 인해 서버는 이전에 클라이언트가 요청했던 결과를 잊어버려 클라이언트를 식별할 수 없는데 이를 stateless라 한다.   
* http가 stateless 한 이유 : 상태가 서버에 저장되지 않으니 서버의 부담을 줄일 수 있다.   
* 그러나 로그인 등 인증이 필요한 과정에서 페이지가 바뀔 때마다 매번 로그인을 요청할 수는 없다.    
* 이 문제를 해결하기 위해 쿠키와 세션, JWT, OAuth 등이 필요하다.   
## 2. 쿠키란?
쿠키는 클라이언트(브라우저) 로컬에 저장되는 키와 값이 들어 있는 작은 데이터 파일이다.   
* 유효한 시간을 명시할 수 있으며, 이 시간이 지나지 않으면 브라우저가 종료되어도 쿠키는 유지된다. 하나의 쿠키 값은 4KB 까지 저장 가능.
* 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request 시 http header에 넣어 자동으로 서버에 요청한다.   
* 서버에서는 쿠키를 생성해 http header에 넣어 응답한다.   
* 서버에서 쿠키를 읽어 들였을 때, 쿠키를 수정할 필요가 있으면 수정한 쿠키를 http header에 넣어 반환한다.
* 쿠키의 사용 예 : 사이트 로그인 시 'id와 pw를 저장하시겠습니까?', 쇼핑몰의 장바구니 기능, '오늘 더 이상 이 창을 보지 않음' 창
## 3. 세션이란?
일정 시간 동안 같은 사용자(브라우저)로부터 들어오는 요청을 하나의 상태로 보고, 그 상태를 일정하게 유지시키는 기술이다.   
방문자가 웹 서버에 접속해 있는 상태를 하나의 단위로 보고, 그것을 세션이라고 하는 것이다.   
* 세션은 쿠키를 기반으로 하고 있지만 정보를 서버 측에서 관리한다.    
* 서버에서는 클라이언트를 구분하기 위해 세션 db에 세션 id를 생성하고 그것을 쿠키에 부여해 리턴한다.    
* 세션도 유효한 시간을 명시할 수 있으며 이 시간이 지나지 않아도 브라우저가 종료되면 세션은 끝난다.   
* 사용자에 대한 정보를 서버에 저장하기 때문에 쿠키보다 보안이 우수하지만 사용자가 많아질 수록 서버 메모리를 많이 차지하게 된다.   
* 세션 id는 쿠키를 통해 클라이언트와 서버를 오간다. 즉, 쿠키는 세션 id를 전달하기 위한 매개체인 것이다.
## 4. 쿠키와 세션의 차이
* 저장 위치 : 쿠키는 브라우저에, 세션은 서버에 저장한다. 세션은 서버에 저장되기 때문에 유저가 많아질 수록 서버에 부담을 준다.   
* 속도 : 세션은 서버의 처리가 필요하므로 속도는 쿠키가 더 빠르다.   
* 보안 : 쿠키는 클라이언트 로컬에 저장되므로 변질되거나 request 도중 탈취될 위험이 있으나 세션은 서버에 저장되고 세션 id만 사용해 통신하므로 더 안전하다.   
* 라이프 사이클 : 둘 다 만료 시간이 존재하지만 쿠키는 브라우저를 닫아도 만료 시간 이전이라면 여전히 남아있고, 세션은 브라우저 종료와 함께 삭제된다.    
## 5. 토큰
쿠키는 브라우저에만 존재하기 때문에 Android나 IOS등의 네이티브 앱에는 없다.    
이것을 해결하기 위해 네이티브 앱에서는 쿠키와 비슷한 string 타입의 토큰이라는 것을 사용한다.   
토큰을 서버에 보내면, 서버는 세션 db에서 해당 토큰에 맞는 유저를 찾게 된다.
## 6. JWT
서버에 저장되어 유저가 많아질 수록 서버에 부담을 주는 세션의 문제를 해결하기 위해 나온 것이 JWT다.   
JWT를 사용하면 서버는 유저를 인증한다고 많은 일을 하지 않아도 된다. JWT는 정보를 갖고 있는 토큰 형식이다.   
JWT를 사용한 로그인 과정을 살펴보면, 우선 브라우저에서 서버로 id와 pw를 보낸다.   
id와 pw가 맞으면 서버는 유저 id를 사인 알고리즘을 통해 변환한(사인된) 장문의 string 값을 저장해 유저에게 보낸다.   
유저는 다음 request부터 사인된 정보 혹은 토큰을 서버에 보낸다.   
서버는 토큰을 받으면 해당 사인이 유효한지 확인하고, 맞으면 클라이언트를 유저로 인증한다.   
JWT는 암호화 되어 있지 않으므로 보안에 적합하지 않다. 비밀번호를 JWT 안에 두면 안된다.   
## 세션과 JWT의 차이
세션은 서버에 로그인 정보를 세션 DB에 저장한다. 이를 위해서는 db를 사고 유지해야 하기 때문에 비용이 많이 든다.   
세션을 이용하는 서비스는 로그인 정보를 활용할 수 있다. ex) 로그인 한 계정 강제 로그아웃, netflix 동시 접속 4인 서비스    
   
JWT는 생성된 토큰을 추적하지 않는다. 토큰이 유효한지 여부만을 알 수 있다. DB를 살 필요도 없다.    
세션이나 DB 없이 유저 인증이 가능하다. ex) QR 코드 체크인   
    
참고 : https://interconnection.tistory.com/74 , https://www.youtube.com/watch?v=tosLBcAX1vk
