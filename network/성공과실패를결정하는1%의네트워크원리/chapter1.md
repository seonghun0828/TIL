# 웹 브라우저가 메시지를 만든다   

  ## 1. HTTP 리퀘스트 메시지를 작성한다   

    1. 탐험 여행은 URL 입력부터 시작한다    

URL은 http 뿐만 아니라 ftp, file, mailto 등 여러 가지가 있다.   
도메인명은 www.cyber.co.kr 같이 마침표(.)로 구분하여 표현하는 이름   
프로토콜 : 통신 동작의 규칙, HTTP(HyperText Transfer Protocol)도 그 중 하나

    2. 브라우저는 먼저 URL을 해독한다   
    
http: + // + 웹 서버명 + 경로명( / + 디렉토리명 + / ... + 파일명)

    3. 파일명을 생략한 경우   
    
서버가 미리 설정해 둔 index.html or default.htm 등에 액세스

    4. HTTP의 기본 개념   
    
URL을 해독하면 어디에 액세스해야 하는지 판명난다. 그러고 나면 브라우저는 HTTP 프로토콜을 사용하여 웹 서버에 액세스.   
먼저 클라이언트에서 서버를 향해 리퀘스트 메시지를 보낸다. ( 무엇을, 어떻게 해서) 하겠다는 내용이 쓰여 있다.   
   
'무엇을'에 해당하는 것이 URI(Uniform Resource Identifier)인데 보통 데이터를 저장한 파일의 이름이나 CGI 프로그램 파일명이다.   
혹은 http:로 시작하면 URL을 그대로 쓸 수도 있다.   
   
'어떻게 해서'에 해당하는 것이 '메소드'로, 어떤 동작을 하고 싶은지를 전달한다.   
GET, POST, PUT, DELETE 등이 있다. 하지만 대부분 쓰이는 것은 GET과 POST

리퀘스트 메시지는 웹서버에 도착하면 내용을 해독한 후 결과 데이터를 응답 메시지에 저장한다.   
응답 메시지의 앞부분에는 404 Not Found 같은 status code가 있다.   
그 후 헤더 파일과 페이지의 데이터가 이어지고, 이 응답 메시지를 클라이언트에 반송한다.   
클라이언트에서 브라우저는 받은 메시지에서 데이터를 추출하여 화면에 표시하며 HTTP의 동작은 끝.

    5. HTTP 리퀘스트 메시지를 만든다.
   
다시 돌아가서 브라우저는 URL을 해독하고 웹 서버와 파일명을 판단하면 이것을 바탕으로 HTTP 리퀘스트 메시지를 만든다.   
포맷은 결정되어 있으므로 브라우저는 이 포맷에 맞게 만든다.   
   
먼저 첫 번째 행은 / 리퀘스트 라인 ( 메소드, URI, HTTP 버전 )
다음 부분은 한 행의 한 개의 / 메시지 헤더 ( 필드명 : 필드값, ... )   
마지막은 POST 방식일 때 / 메시지 본문 ( 서버에 보내는 데이터 )   
   

    6. 리퀘스트 메시지를 보내면 응답이 되돌아온다
    
응답 메시지는 리퀘스트 메시지와 첫 번째 행만 다르다.   
스테이터스 라인 ( HTTP 버전, status code, 응답 문구 )   
마지막의 데이터 부분을 추출한 후 화면에 표시하여 웹 페이지를 눈으로 볼 수 있다.   
페이지가 문장으로만 되어 있으면 끝. 영상 등이 포함되어 있으면 계속 이어진다.   
   
리퀘스트 메시지의 URI는 한 개로 결정되어 있으므로 파일을 한 번에 한 개씩만 읽을 수 있다.   
그러므로 응답 메시지에 영상 파일 태그가 포함되어 있으면 그것을 요청하는 리퀘스트 메시지를 만들어 보낸다.   
즉, 한 문장에 3개의 영상이 포함되어 있다면 문장 파일을 읽는 리퀘스트와 영상 파일을 읽는 리퀘스트 3개로   
총 4회 리퀘스트르 메시지를 서버에 보내게 된다.   
  ## 2. 웹 서버의 IP 주소를 DNS 서버에 조회한다
  
    1. IP 주소의 기본   
    
HTTP 메시지를 만들면 OS에게 네트워크 송출을 의뢰하는데, 이 과정에서 도메인명을 IP 주소로 변환해야 한다.   
IP 주소는 TCP/IP의 개념에 기초하여 만들어졌다.   
   
TCP/IP와 IP주소의 기본 개념 : 액세스 대상의 서버까지 메시지를 운반할 때는,   
송신측 -> 메시지 (허브가 운반) -> 가장 가까운 라우터 -> 메시지를 확인해 다음 라우터를 판단하고 송신 -> 다음 라우터 -> ... -> 도착   
   
서브넷 = 몇 대의 PC가 허브에 접속해 있는 작은 네트워크   
전체 네트워크 = 라우터로 연결된 서브넷들의 집합   
   
IP 주소 : 00동 00번지 -> 네트워크 번호 : 00동, 호스트 번호 : 00번지   
   IP 주소는 32비트, 8비트씩 점으로 구분하여 10진수로 표기 ex) 10.11.12.13   
      
   IP 주소만으로는 무엇이 네트워크 번호이고 호스트 번호인지 알 수 없으므로 '넷마스크'를 덧붙여 식별   
   ex) 10.11.12.13/255.255.255.0   
       ㄴㅡIP 주소    ㄴㅡ넷마스크   
          
   네트워크 번호의 비트 수로 넷마스크를 표기하는 방법   
   ex ) 10.11.12.13/24   
        ㄴㅡIP 주소    ㄴㅡ 넷마스크   
           
   호스트 번호 부분의 비트가 모두 0인 것은 각 컴퓨터가 아니라 서브넷 자체를 나타냄 ex) 10.11.12.0/24    
   호스트 번호 부분의 비트가 모두 1인 것은 서브넷 전체에 대한 브로드캐스트를 나타냄 ex) 10.11.12.255/24   

    2. 도메인명과 IP 주소를 구분하여 사용하는 이유
IP 주소는 구분하기 어렵고, 도메인명을 주소로 사용하기에는 용량이 너무 커서 비효율적   

    3. Socket 라이브러리가 IP 주소를 찾는 기능을 제공한다
Socket 라이브러리는 OS의 네트워크 기능을 애플리케이션에서 호출하기 위한 모음집   
그 중 DNS 서버를 조회하는 DNS 리졸버도 포함

    4. 리졸버를 이용하여 DNS 서버를 조회한다
도메인명에서 IP 주소를 조사할 때 브라우저는 Socket 라이브러리의 리졸버를 이용한다.

    5. 리졸버 내부의 작동
브라우저 -> Socket 리졸버 ( DNS 조회 메시지 만들고 송신 ) -> OS 내부 프로토콜 스택 -> DNS 서버 -> 역순으로 진행 -> 브라우저 메시지 수신
   
